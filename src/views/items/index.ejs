<!DOCTYPE html>
<html lang="en">
  <head>
    <% include ../static/partials/head.ejs %>
  </head>
  <body class="main-page">
  
      <!-- Navigation -->
     <% include ../static/partials/navbar.ejs %>
      <!-- Page Content -->
      <main class="container">
        <% include ../static/partials/messages.ejs %>
        <div class="row justify-content-md-center"></div>
        
        <div class="row justify-content-md-center align-middle" >
           <div class="col-md-11">
             <h4 style="display: inline-block; margin-right:10px">All Items</h4>
              <a href="/items/new" class="btn btn-success btn-sm">New Item</a>
           </div>
       </div>

       <% if(items != "") { %>
        <div class="row justify-content-md-center">
           <div class="col-md-11">
            <table id="itemTable">
              <thead>
                <tr>
                  <col>
                  <col style="width:10%">
                  <col style="width:10%">
                </tr>
              <thead>
              <tbody>
                <% const allItems = items.filter(item => item.userId === currentUser.id) %>
                <% allItems.forEach((item) => {  %>
                <tr>
                  <td><a href="/items/<%= item.id %>"><%= item.title %></a></td>
                  <td><a href="/items/<%= item.id %>/edit" class="btn btn-warning btn-sm">Edit Item</a></td>
                  <td>
                    <form style="display:initial" action="/items/<%= item.id %>/destroy" method="post">
                      <button type="submit" class="btn btn-danger btn-sm">Delete Item</button>
                    </form>
                  </td>
                </tr>
                <% }) %>
              </tbody>
            </table>
           </div>
         </div>
         <% } %>
     </main>
      <!-- /.container -->

       <% include ../static/partials/baseScripts.ejs %>
    </body>
</html>